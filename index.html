<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>消不停·万币赢 - Telegram小游戏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6402806742664594" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/game.css">
    <link rel="stylesheet" href="css/cute-theme.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 加载页面 -->
    <div id="loading-screen" class="screen">
        <div class="loading-container">
            <div class="game-logo">
                <h1>消不停·万币赢</h1>
                <div class="logo-subtitle">每天都有新惊喜</div>
            </div>
            <div class="loading-spinner"></div>
            <div class="loading-text">正在加载游戏...</div>
        </div>
        <div class="sponsor-info">
            <p>本游戏由"北京修车【万花楼】"赞助开发</p>
            <p>开发者：<a href="#" id="developer-link">@bjxc010</a> | 合作联系：<a href="#" id="cooperation-link">@bjxc010</a></p>
        </div>
    </div>

    <!-- 主菜单 -->
    <div id="main-menu" class="screen hidden">
        <div class="header">
            <div class="user-info">
                <div class="user-avatar">
                    <div id="user-avatar" class="avatar-placeholder">🐱</div>
                </div>
                <div class="user-details">
                    <div class="username" id="username">加载中...</div>
                    <div class="user-level">等级 <span id="user-level">1</span></div>
                </div>
            </div>
            <div class="currency-info">
                <div class="coin-count">
                    <span class="coin-icon">🪙</span>
                    <span id="coin-count">0</span>
                </div>
                <div class="energy-bar">
                    <div class="energy-fill" id="energy-fill"></div>
                    <span class="energy-text">体力 <span id="energy-count">100</span>/100</span>
                </div>
                <div class="attempts-display">
                    <span>游戏次数 <span id="daily-attempts">6</span></span>
                    <span id="attempts-warning" class="btn-badge">!</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="game-modes">
                <button class="game-mode-btn primary" id="classic-mode">
                    <div class="mode-icon">🎮</div>
                    <div class="mode-text">经典模式</div>
                </button>
                <button class="game-mode-btn" id="challenge-mode">
                    <div class="mode-icon">⚡</div>
                    <div class="mode-text">挑战模式</div>
                </button>
                <button class="game-mode-btn" id="adventure-mode">
                    <div class="mode-icon">🗺️</div>
                    <div class="mode-text">冒险模式</div>
                </button>
            </div>

            <div class="menu-buttons">
                <div class="button-row">
                    <button class="menu-btn" id="daily-checkin">
                        <div class="btn-icon">📅</div>
                        <div class="btn-text">每日签到</div>
                        <div class="btn-badge" id="checkin-badge" style="display: none;">!</div>
                    </button>
                    <button class="menu-btn" id="shop-btn">
                        <div class="btn-icon">🛒</div>
                        <div class="btn-text">道具商店</div>
                    </button>
                    <button class="menu-btn" id="achievements-btn">
                        <div class="btn-icon">🏆</div>
                        <div class="btn-text">成就系统</div>
                    </button>
                </div>
                <div class="button-row">
                    <button class="menu-btn" id="leaderboard-btn">
                        <div class="btn-icon">🎯</div>
                        <div class="btn-text">排行榜</div>
                    </button>
                    <button class="menu-btn" id="withdraw-btn">
                        <div class="btn-icon">💰</div>
                        <div class="btn-text">提现中心</div>
                    </button>
                    <button class="menu-btn" id="invite-friends">
                        <div class="btn-icon">👥</div>
                        <div class="btn-text">邀请好友</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- 广告横幅 -->
        <div id="banner-ad" class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-6402806742664594"
                 data-ad-slot="3631141010"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <div class="sponsor-info">
            <p>本游戏由"北京修车【万花楼】"赞助开发</p>
            <p>开发者：<a href="#" class="sponsor-link">@bjxc010</a> | 合作联系：<a href="#" class="sponsor-link">@bjxc010</a></p>
        </div>
    </div>

    <!-- 游戏界面 -->
    <div id="game-screen" class="screen hidden">
        <div class="game-header">
            <button id="pause-btn" class="icon-btn">⏸️</button>
            <div class="game-info">
                <div class="info-item">
                    <div class="info-label">得分</div>
                    <div class="info-value" id="game-score">0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">关卡</div>
                    <div class="info-value" id="game-level">1</div>
                </div>
                <div class="info-item">
                    <div class="info-label">步数</div>
                    <div class="info-value" id="moves-left">30</div>
                </div>
                <div class="info-item">
                    <div class="info-label">时间</div>
                    <div class="info-value" id="time-left">60</div>
                </div>
            </div>
            <button id="menu-btn" class="icon-btn">📋</button>
        </div>

        <!-- 游戏目标显示 -->
        <div class="game-objectives">
            <div class="objective-title">🎯 本关目标</div>
            <div class="objective-list" id="objective-list">
                <div class="objective-item">
                    <span class="objective-icon">🍎</span>
                    <span class="objective-text">消除 <span class="target-count">20</span> 个苹果</span>
                    <span class="objective-progress">0/20</span>
                </div>
            </div>
        </div>

        <div class="game-canvas-container">
            <canvas id="game-canvas" width="400" height="600"></canvas>
            <div id="game-ui-overlay">
                <!-- 游戏UI叠加层 -->
            </div>
        </div>

        <div class="tools-container">
            <button class="tool-btn" id="hammer-tool" title="消除单个方块">
                <div class="tool-icon">🔨</div>
                <div class="tool-name">小锤子</div>
                <span class="tool-count" id="hammer-count">3</span>
            </button>
            <button class="tool-btn" id="shuffle-tool" title="重新排列所有方块">
                <div class="tool-icon">🔄</div>
                <div class="tool-name">洗洗牌</div>
                <span class="tool-count" id="shuffle-count">2</span>
            </button>
            <button class="tool-btn" id="steps-tool" title="增加5步额外步数">
                <div class="tool-icon">👟</div>
                <div class="tool-name">加步数</div>
                <span class="tool-count" id="steps-count">2</span>
            </button>
            <button class="tool-btn" id="hint-tool" title="显示可消除的方块">
                <div class="tool-icon">💡</div>
                <div class="tool-name">小提示</div>
                <span class="tool-count" id="hint-count">5</span>
            </button>
        </div>

        <div class="sponsor-info">
            <p>本游戏由"北京修车【万花楼】"赞助开发 | <a href="#" class="sponsor-link">@bjxc010</a></p>
        </div>
    </div>

    <!-- 模态框容器 -->
    <div id="modal-container"></div>

    <!-- 音频文件 -->
    <audio id="background-music" loop>
        <source src="audio/bg-music.mp3" type="audio/mpeg">
    </audio>
    <audio id="match-sound">
        <source src="audio/match.mp3" type="audio/mpeg">
    </audio>
    <audio id="coin-sound">
        <source src="audio/coin.mp3" type="audio/mpeg">
    </audio>
    <audio id="button-sound">
        <source src="audio/button.mp3" type="audio/mpeg">
    </audio>

    <!-- JavaScript文件 -->
    <script src="js/config.js"></script>
    <script src="js/telegram.js"></script>
    <script src="js/database.js"></script>
    <script src="js/user.js"></script>
    <script src="js/currency.js"></script>
    <script src="js/game-engine.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/ads.js"></script>
    <script src="js/achievements.js"></script>
    <script src="js/leaderboard.js"></script>
    <script src="js/withdraw.js"></script>
    <script src="js/social.js"></script>
    <script src="js/bot.js"></script>
    <script src="js/game-objectives.js"></script>
    <script src="js/daily-attempts.js"></script>
    <script src="js/main.js"></script>
</body>
</html>